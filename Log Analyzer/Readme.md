üîñ–î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ –¥–ª—è –∫—É—Ä—Å–∞ <code>["Python Developer. Professional"](https://otus.ru/lessons/python-professional/)</code>
# Nginx log analyzer
–ü–∞—Ä—Å–µ—Ä nginx –ª–æ–≥–æ–≤. –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç—á—ë—Ç–∞ –≤ –ø–∞–ø–∫—É reports —Å –∏–º–µ–Ω–µ–º report-Y.m.d.html –í –Ω—ë–º —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è —Å–ø–∏—Å–æ–∫ url —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–º–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏ –ø–æ –∫–∞–∂–¥–æ–º—É –∏–∑ –Ω–∏—Ö.
# –§–æ—Ä–º–∞—Ç –ª–æ–≥–∞
`'$remote_addr $remote_user $http_x_real_ip [$time_local] "$request" $status $body_bytes_sent "$http_referer" ' '"$http_user_agent" "$http_x_forwarded_for" "$http_X_REQUEST_ID" "$http_X_RB_USER" $request_time'`
# –ü—Ä–∏–º–µ—Ä –ª–æ–≥–∞
`1.169.137.128 -  - [29/Jun/2017:03:50:23 +0300] "GET /api/v2/group/1823183/banners HTTP/1.1" 200 1002 "-" "Configovod" "-" "1498697423-2118016444-4708-9752777" "712e90144abee9" 0.680`
# –°—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è url
- count - —Åƒ∏–æ–ª—åƒ∏–æ —Ä–∞–∑ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è URL, –∞–±—Å–æ–ª—é—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ 
- count_perc - —Åƒ∏–æ–ª—åƒ∏–æ —Ä–∞–∑ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è URL, –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–Ω–∞—Ö –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –æ–±—â–µ–≥–æ —á–∏—Å–ª–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ 
- time_sum - —Å—É–º–º–∞—Ä–Ω—ã–π $request_time –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ URL'–∞, –∞–±—Å–æ–ª—é—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ 
- time_perc - —Å—É–º–º–∞—Ä–Ω—ã–π $request_time –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ URL'–∞, –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –æ–±—â–µ–≥–æ $request_time –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ 
- time_avg - —Å—Ä–µ–¥–Ω–∏–π $request_time –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ URL'–∞ 
- time_max - –º–∞ƒ∏—Å–∏–º–∞–ª—å–Ω—ã–π $request_time –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ URL'–∞ 
- time_med - –º–µ–¥–∏–∞–Ω–∞ $request_time –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ URL'–∞
# Python 
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å –≤–µ—Ä—Å–∏—è 3.9.6
# log_analyzer.py
–°–∫—Ä–∏–ø—Ç –ø–∞—Ä—Å–µ—Ä–∞ –ª–æ–≥–æ–≤. –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –Ω–∞ –≤—Ö–æ–¥ –ø–∞—Ä–∞–º–µ—Ç—Ä --config —Å –∏–º–µ–Ω–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞.
–ï—Å–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä –Ω–µ –∑–∞–¥–∞–Ω, —Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é log_analyzer.conf
### –ü—Ä–∏–º–µ—Ä –∑–∞–ø—É—Å–∫–∞
<code>python log_analyzer --config log_analyzer.conf</code>
# test_log_analyzer.py
–°–∫—Ä–∏–ø—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –ø–∞—Ä—Å–µ—Ä–∞ –ª–æ–≥–æ–≤. 
### –ü—Ä–∏–º–µ—Ä –∑–∞–ø—É—Å–∫–∞
<code>python -m unittest test_log_analyzer</code>
